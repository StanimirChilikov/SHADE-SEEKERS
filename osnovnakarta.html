<!-- <!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>–ù–æ—â–Ω–∞ –ø—Ä–æ—Ö–ª–∞–¥–∞ - –°–æ—Ñ–∏—è</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />

    <style>
        #map { height: 100vh; }
        .controls {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 999;
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 0 5px rgba(0,0,0,0.4);
        }
        .controls button {
            display: block;
            margin: 4px 0;
            padding: 6px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #sosBtn {
            background-color: red;
            color: white;
            font-weight: bold;
        }
        #sosBtn::before {
            content: "üö® ";
        }
        #searchInput {
            margin-bottom: 6px;
            padding: 5px;
            width: 180px;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <div class="controls">
        <input type="text" id="searchInput" placeholder="–¢—ä—Ä—Å–µ–Ω–µ –ø–æ –∏–º–µ..." />
        <button onclick="filterMarkers('all')">–ü–æ–∫–∞–∂–∏ –≤—Å–∏—á–∫–∏</button>
        <button onclick="filterMarkers('fountain')">–ß–µ—à–º–∏—á–∫–∏</button>
        <button onclick="filterMarkers('forest')">–ì–æ—Ä–∏</button>
        <button onclick="filterMarkers('coolspot')">–°—Ç—É–¥–µ–Ω–∏ –∫—ä—Ç—á–µ—Ç–∞</button>
        <button id="sosBtn" onclick="sendSOS()">SOS –ë—É—Ç–æ–Ω</button>
    </div>

    <script>
        const map = L.map("map").setView([42.6977, 23.3219], 13);
        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
            attribution: "Map data ¬© OpenStreetMap contributors"
        }).addTo(map);

        const categories = {
            fountain: "–ß–µ—à–º–∏—á–∫–∞",
            forest: "–ì–æ—Ä–∞",
            coolspot: "–°—Ç—É–¥–µ–Ω–æ –º—è—Å—Ç–æ"
        };

        const markersData = [
            { name: "–ß–µ—à–º–∞ –û—Ä–ª–æ–≤ –º–æ—Å—Ç", lat: 42.688, lon: 23.335, category: "fountain" },
            { name: "–ë–æ—Ä–∏—Å–æ–≤–∞ –≥—Ä–∞–¥–∏–Ω–∞", lat: 42.681, lon: 23.343, category: "forest" },
            { name: "–õ–∞–≤–∫–∞ —Å—è–Ω–∫–∞", lat: 42.695, lon: 23.315, category: "coolspot" },
            { name: "–Æ–∂–µ–Ω –ø–∞—Ä–∫", lat: 42.677, lon: 23.314, category: "forest" },
            { name: "–ß–µ—à–º–∞ –ù–î–ö", lat: 42.691, lon: 23.318, category: "fountain" },
            { name: "–õ–∞—Ä–≥–æ—Ç–æ ‚Äì —Ö–ª–∞–¥–Ω–æ –º—è—Å—Ç–æ", lat: 42.6972, lon: 23.322, category: "coolspot" },
            { name: "–ß–µ—à–º–∞ –ó–∞–ø–∞–¥–µ–Ω –ø–∞—Ä–∫", lat: 42.705, lon: 23.282, category: "fountain" },
            { name: "–ì—Ä–∞–¥—Å–∫–∞ –≥—Ä–∞–¥–∏–Ω–∞", lat: 42.695, lon: 23.325, category: "coolspot" }
        ];

        let markerGroup = L.layerGroup().addTo(map);
        let routingControl = null;

        function loadMarkers(filtered = "all") {
            markerGroup.clearLayers();
            markersData.forEach(item => {
                if (filtered === "all" || item.category === filtered) {
                    const marker = L.marker([item.lat, item.lon]).addTo(markerGroup);
                    marker.bindPopup(`<strong>${item.name}</strong><br><em>${categories[item.category]}</em><br><button onclick="navigateTo(${item.lat}, ${item.lon})">–ü–æ–∫–∞–∂–∏ –º–∞—Ä—à—Ä—É—Ç</button>`);
                }
            });
        }

        function filterMarkers(cat) {
            loadMarkers(cat);
        }

        function sendSOS() {
            if (!navigator.geolocation) {
                alert("–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è—Ç–∞ –Ω–µ —Å–µ –ø–æ–¥–¥—ä—Ä–∂–∞!");
                return;
            }

            navigator.geolocation.getCurrentPosition(pos => {
                const { latitude, longitude } = pos.coords;
                L.marker([latitude, longitude], { icon: L.icon({ iconUrl: 'https://cdn-icons-png.flaticon.com/512/565/565547.png', iconSize: [32, 32] }) })
                    .addTo(map)
                    .bindPopup("–í–∞—à–µ—Ç–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–æ!")
                    .openPopup();

                console.log("SOS –∏–∑–ø—Ä–∞—Ç–µ–Ω–æ –æ—Ç:", latitude, longitude);
            }, () => alert("–ù–µ –º–æ–∂–µ –¥–∞ —Å–µ –ø–æ–ª—É—á–∏ –ª–æ–∫–∞—Ü–∏—è."));
        }

        function navigateTo(destLat, destLon) {
            if (!navigator.geolocation) {
                alert("–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è—Ç–∞ –Ω–µ —Å–µ –ø–æ–¥–¥—ä—Ä–∂–∞!");
                return;
            }

            navigator.geolocation.getCurrentPosition(pos => {
                const { latitude, longitude } = pos.coords;

                if (routingControl) map.removeControl(routingControl);

                routingControl = L.Routing.control({
                    waypoints: [
                        L.latLng(latitude, longitude),
                        L.latLng(destLat, destLon)
                    ],
                    lineOptions: {
                        styles: [{ color: "green", opacity: 0.7, weight: 6 }]
                    },
                    router: L.Routing.osrmv1({
                        profile: "foot"
                    }),
                    createMarker: function() { return null; }
                }).addTo(map);
            }, () => alert("–ù–µ –º–æ–∂–µ –¥–∞ —Å–µ –ø–æ–ª—É—á–∏ –ª–æ–∫–∞—Ü–∏—è."));
        }

        // –¢—ä—Ä—Å–∞—á–∫–∞
        document.getElementById("searchInput").addEventListener("input", function () {
            const text = this.value.toLowerCase();
            markerGroup.clearLayers();
            markersData.forEach(item => {
                if (item.name.toLowerCase().includes(text)) {
                    const marker = L.marker([item.lat, item.lon]).addTo(markerGroup);
                    marker.bindPopup(`<strong>${item.name}</strong><br><em>${categories[item.category]}</em><br><button onclick="navigateTo(${item.lat}, ${item.lon})">–ü–æ–∫–∞–∂–∏ –º–∞—Ä—à—Ä—É—Ç</button>`);
                }
            });
        });

        loadMarkers("all");
    </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>–ö–∞—Ä—Ç–∞ –Ω–∞ –ø—Ä–æ—Ö–ª–∞–¥–Ω–∏—Ç–µ –º–µ—Å—Ç–∞ - SHADE SEEKERS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
     <link rel="stylesheet" href="style.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">
    

    <style>
        #map { height: 100vh; }
        .controls {
            position: absolute;
            top: 425px;
            left: 50px;
            z-index: 999;
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 0 5px rgba(0,0,0,0.4);
        }
        .controls button {
            display: block;
            margin: 4px 0;
            padding: 6px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #sosBtn {
            background-color: red;
            color: white;
            font-weight: bold;
        }
        #sosBtn::before {
            content: "üö® ";
        }
        #searchInput {
            margin-bottom: 6px;
            padding: 5px;
            width: 180px;
        }
        .footer{
            width: 100%;
            text-align: center;
            padding: 30px 0;
        }

        .footer h4{
            margin-bottom: 25px;
            margin-top: 20px;
            font-weight: 600;
        }

        .icons{
            color: rgb(124, 249, 124);
            margin: 0 13px;
            cursor: pointer;
            font-size: 30px;
            padding: 18px 0;
        }
    </style>
</head>
<body>
     <section class="sub-header">
        <nav>
            <a href="index.html"><img src="images/logoo2.png"></a>
            <div class="nav-links" id="navLinks">
                <!-- <i class="fas fa-times" onclick="hideMenu()"></i> -->
                <ul>
                    <li><a href="main.html">HOME</a></li>
                    <li><a href="#safety-rules">RULES</a></li>
                    <li><a href="dune.html">HeatMAP</a></li>
                    <li><a href="contact.html">CONTACT</a></li>
                    <li><a href="img.html">PHOTOS</a></li>
                    <li><a href="timeline.html">TIMELINE</a></li>
                </ul>
            </div>
            <!-- <i class="fas fa-bars" onclick="showMenu()"></i> -->
        </nav>
        <h1>–ò–Ω–æ–≤–∞—Ç–∏–≤–Ω–∞ –∫–∞—Ä—Ç–∞ –Ω–∞ –ø—Ä–æ—Ö–ª–∞–¥–Ω–∏—Ç–µ –º–µ—Å—Ç–∞ –≤ –°–æ—Ñ–∏—è</h1>
    </section>

    <div id="map"></div>

    <div class="controls">
        <input type="text" id="searchInput" placeholder="–¢—ä—Ä—Å–µ–Ω–µ –ø–æ –∏–º–µ..." />
        <button onclick="filterMarkers('all')">–ü–æ–∫–∞–∂–∏ –≤—Å–∏—á–∫–∏</button>
        <button onclick="filterMarkers('forest')">–ó–µ–ª–µ–Ω–∏ –ø–ª–æ—â–∏</button>
        <button onclick="filterMarkers('fountain')">–ß–µ—à–º–∏—á–∫–∏</button>
        <button onclick="filterMarkers('coolspot')">–°—Ç—É–¥–µ–Ω–∏ –∫—ä—Ç—á–µ—Ç–∞</button>
        <button id="sosBtn" onclick="sendSOS()">SOS –ë—É—Ç–æ–Ω</button>
    </div>

    
        <section class="footer">
            <h4>–ó–∞ –Ω–∞—Å</h4>
            <p> –ù–∏–µ —Å–º–µ Greenovators ‚Äì –µ–∫–∏–ø –æ—Ç –º–ª–∞–¥–∏ —Ö–æ—Ä–∞ —Å –∏–¥–µ–∏ –∑–∞ –ø–æ-–ø—Ä–æ—Ö–ª–∞–¥–µ–Ω –∏ –ø–æ-–ø—Ä–∏—è—Ç–µ–Ω –≥—Ä–∞–¥. <br>
                –°—ä–∑–¥–∞–¥–æ—Ö–º–µ —Ç–æ–∑–∏ —Å–∞–π—Ç, –∑–∞ –¥–∞ –ø–æ–º–æ–≥–Ω–µ–º –≤ –±–æ—Ä–±–∞—Ç–∞ —Å —Ç—Ä–æ–ø–∏—á–µ—Å–∫–∏—Ç–µ –Ω–æ—â–∏, –∫–∞—Ç–æ —Å—ä–±–∏—Ä–∞–º–µ –Ω–∞ –µ–¥–Ω–æ –º—è—Å—Ç–æ —á–µ—à–º–∏, —Å–µ–Ω—á–µ—Å—Ç–∏ –∏ –ø—Ä–æ—Ö–ª–∞–¥–Ω–∏ –∑–æ–Ω–∏, –¥–æ—Å—Ç—ä–ø–Ω–∏ –∑–∞ –≤—Å–∏—á–∫–∏. <br>
                –í—è—Ä–≤–∞–º–µ, —á–µ —Å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, –≥—Ä–∏–∂–∞ –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç –≥—Ä–∞–¥—ä—Ç –º–æ–∂–µ –¥–∞ —Å—Ç–∞–Ω–µ –ø–æ-—Ö–ª–∞–¥–Ω–æ –∏ –ø—Ä–∏—è—Ç–Ω–æ –º—è—Å—Ç–æ –∑–∞ —Ö–æ—Ä–∞—Ç–∞ –∏ –∂–∏–≤–æ—Ç–Ω–∏—Ç–µ!
            </p>
            <div class="icons">
                <i class="fab fa-facebook-square"></i>
                <i class="fab fa-instagram"></i>
            </div>


        </section>


    <script>
        function showMenu() {
    document.getElementById("navLinks").style.right = "0";
}
function hideMenu() {
    document.getElementById("navLinks").style.right = "-200px";
}

        const map = L.map("map").setView([42.6977, 23.3219], 13);
        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
            attribution: "Map data ¬© OpenStreetMap contributors"
        }).addTo(map);

        const categories = {
            forest: "–ó–µ–ª–µ–Ω–∏ –ø–ª–æ—â–∏",
            fountain: "–ß–µ—à–º–∏—á–∫–∞",
            coolspot: "–°—Ç—É–¥–µ–Ω–æ –º—è—Å—Ç–æ"
        };

        const markersData = [
            { name: "–ß–µ—à–º–∞ –û—Ä–ª–æ–≤ –º–æ—Å—Ç", lat: 42.688, lon: 23.335, category: "fountain" },
            { name: "–ë–æ—Ä–∏—Å–æ–≤–∞ –≥—Ä–∞–¥–∏–Ω–∞", lat: 42.681, lon: 23.343, category: "forest" },
            { name: "–õ–∞–≤–∫–∞ —Å—è–Ω–∫–∞", lat: 42.695, lon: 23.315, category: "coolspot" },
            { name: "–Æ–∂–µ–Ω –ø–∞—Ä–∫", lat: 42.677, lon: 23.314, category: "forest" },
            { name: "–ß–µ—à–º–∞ –ù–î–ö", lat: 42.691, lon: 23.318, category: "fountain" },
            { name: "–õ–∞—Ä–≥–æ—Ç–æ ‚Äì —Ö–ª–∞–¥–Ω–æ –º—è—Å—Ç–æ", lat: 42.6972, lon: 23.322, category: "coolspot" },
            { name: "–ß–µ—à–º–∞ –ó–∞–ø–∞–¥–µ–Ω –ø–∞—Ä–∫", lat: 42.705, lon: 23.282, category: "fountain" },
            { name: "–ì—Ä–∞–¥—Å–∫–∞ –≥—Ä–∞–¥–∏–Ω–∞", lat: 42.695, lon: 23.325, category: "coolspot" }
        ];

        let markerGroup = L.layerGroup().addTo(map);
        let routingControl = null;

        function loadMarkers(filtered = "all") {
            markerGroup.clearLayers();
            markersData.forEach(item => {
                if (filtered === "all" || item.category === filtered) {
                    const marker = L.marker([item.lat, item.lon]).addTo(markerGroup);
                    marker.bindPopup(`<strong>${item.name}</strong><br><em>${categories[item.category]}</em><br><button onclick="navigateTo(${item.lat}, ${item.lon})">–ü–æ–∫–∞–∂–∏ –º–∞—Ä—à—Ä—É—Ç</button>`);
                }
            });
        }

        function filterMarkers(cat) {
            loadMarkers(cat);
        }

        function sendSOS() {
            if (!navigator.geolocation) {
                alert("–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è—Ç–∞ –Ω–µ —Å–µ –ø–æ–¥–¥—ä—Ä–∂–∞!");
                return;
            }

            navigator.geolocation.getCurrentPosition(pos => {
                const { latitude, longitude } = pos.coords;

                const redIcon = new L.Icon({
                    iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
                    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',
                    iconSize: [25, 41],
                    iconAnchor: [12, 41],
                    popupAnchor: [1, -34],
                    shadowSize: [41, 41]
                });

                L.marker([latitude, longitude], { icon: redIcon })
                    .addTo(map)
                    .bindPopup("–í–∞—à–µ—Ç–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–æ!")
                    .openPopup();

                document.getElementById("sosBtn").textContent = "üö® SOS –∏–∑–ø—Ä–∞—Ç–µ–Ω–æ!";

                console.log("SOS –∏–∑–ø—Ä–∞—Ç–µ–Ω–æ –æ—Ç:", latitude, longitude);
            }, () => alert("–ù–µ –º–æ–∂–µ –¥–∞ —Å–µ –ø–æ–ª—É—á–∏ –ª–æ–∫–∞—Ü–∏—è."));
        }

        function navigateTo(destLat, destLon) {
            if (!navigator.geolocation) {
                alert("–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è—Ç–∞ –Ω–µ —Å–µ –ø–æ–¥–¥—ä—Ä–∂–∞!");
                return;
            }

            navigator.geolocation.getCurrentPosition(pos => {
                const { latitude, longitude } = pos.coords;

                if (routingControl) map.removeControl(routingControl);

                routingControl = L.Routing.control({
                    waypoints: [
                        L.latLng(latitude, longitude),
                        L.latLng(destLat, destLon)
                    ],
                    lineOptions: {
                        styles: [{ color: "green", opacity: 0.7, weight: 6 }]
                    },
                    router: L.Routing.osrmv1({
                        profile: "foot"
                    }),
                    createMarker: function() { return null; }
                }).addTo(map);
            }, () => alert("–ù–µ –º–æ–∂–µ –¥–∞ —Å–µ –ø–æ–ª—É—á–∏ –ª–æ–∫–∞—Ü–∏—è."));
        }

        // –¢—ä—Ä—Å–∞—á–∫–∞
        document.getElementById("searchInput").addEventListener("input", function () {
            const text = this.value.toLowerCase();
            markerGroup.clearLayers();
            markersData.forEach(item => {
                if (item.name.toLowerCase().includes(text)) {
                    const marker = L.marker([item.lat, item.lon]).addTo(markerGroup);
                    marker.bindPopup(`<strong>${item.name}</strong><br><em>${categories[item.category]}</em><br><button onclick="navigateTo(${item.lat}, ${item.lon})">–ü–æ–∫–∞–∂–∏ –º–∞—Ä—à—Ä—É—Ç</button>`);
                }
            });
        });

        loadMarkers("all");
    </script>
</body>
</html>

